<div class="container">

  <!-- Header -->
  <header class="flex between" style="padding: 1rem 0;" #header>
    <div class="logo flex center">
      <img src="" alt="nextOnStage Logo" style="height: 40px; margin-right: 0.5rem;">
      <h2>Next on Stage</h2>
    </div>
    <nav class="flex center" style="gap: 1rem;">
      <a routerLink="/" routerLinkActive="active">Home</a>
      <a routerLink="/festivals" routerLinkActive="active">Festivals</a>
      <a routerLink="/favorites" routerLinkActive="active">Favoriten</a>
    </nav>
  </header>


  <!-- Aktives Festival -->
  @if (crudManager.activeFestival) {
  <div class="active-festival card shadow flex center">
    <h3>{{ crudManager.activeFestival.emoji }} {{ crudManager.activeFestival.name }}</h3>
    <p>{{ crudManager.activeFestival.location }} | {{ crudManager.activeFestival.startDate | date:'dd.MM.yyyy' }} - {{
      crudManager.activeFestival.endDate |
      date:'dd.MM.yyyy' }}</p>
  </div>
  }

  @if (crudManager.festivals.length === 0) {
  <!-- Hero Section -->
  <section class="hero card shadow flex center" style="flex-direction: column; text-align: center; margin: 2rem 0;">
    <h1>Dein Festival-Planer ðŸŽ¶</h1>
    <p class="text-muted" style="max-width: 600px; margin: 0.5rem auto 1.5rem;">
      Mit <strong>nextOnStage</strong> kannst du deine Festivals speichern, Lineups ansehen
      und deine Lieblings-DJs nie wieder verpassen.
    </p>
    <button class="btn" (click)="modalService.openModal('festival')">Festival hinzufÃ¼gen</button>
  </section>
  } @else {
  <!-- Festival Liste -->

  <section>

    <h2 style="margin-bottom: 1rem;">Meine Festivals</h2>
    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
      @for (festival of crudManager.festivals; track $index) {
      <div class="festival-card card">
        <h3>{{ festival.emoji }} {{ festival.name }}</h3>
        <p class="text-muted">{{ festival.location }} â€¢ {{ festival.startDate }} - {{ festival.endDate }}</p>
        <div class="lineup-buttons">
          <button class="btn" (click)="crudManager.setActiveFestival(festival)">Festival aktivieren</button>

          <button class="btn" (click)="modalService.openModal('lineUp')">Line-Up
            bearbeiten</button>
        </div>
      </div>
      }
    </div>
  </section>
  <div class="more-festivals" >
    <button class="btn" (click)="modalService.openModal('festival')">Festival hinzufÃ¼gen</button>
  </div>
  }






  <!-- Footer -->
  <footer class="text-muted" style="text-align: center; padding: 2rem 0; font-size: 0.85rem;">
    Â© 2025 Next on Stage - Developer: Mike Schauber
  </footer>

  <!-- Modal -->
  @if (modalService.showModal) {
  <div class="modal-backdrop" #container (click)="modalService.closeModal()"></div>
  <div class="modal  shadow">
    @if (modalService.showFestivalModal) {
    <app-add-festival-modal></app-add-festival-modal>
    }
    @else if (modalService.showLineupModal) {
    <app-edit-lineup-modal></app-edit-lineup-modal>
    }

  </div>
  }


</div>